(()=>{"use strict";const e=(e,t,r)=>{switch(e=Number(e),r=Number(r),t){case"+":return function(e,t){return e+t}(e,r);case"-":return function(e,t){return e-t}(e,r);case"*":return function(e,t){return e*t}(e,r);case"/":return 0==r?null:function(e,t){return e/t}(e,r);default:return}},t=(e,t,...r)=>{const n=document.createElement(e);for(let e in t)n.setAttribute(e,t[e]);return r.forEach((e=>{"string"==typeof e?n.appendChild(document.createTextNode(e)):n.appendChild(e)})),n},r=[{left:[1,"+","?"],right:[1,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:[5,"-","?"],right:[3,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:[5,"-","?"],right:[3,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:[5,"-","?"],right:[3,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:[5,"-","?"],right:[3,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:[5,"-","?"],right:[3,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:[5,"-","?"],right:[3,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:[5,"-","?"],right:[3,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:[5,"-","?"],right:[3,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:[5,"-","?"],right:[3,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:[5,"-","?"],right:[3,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:["?","-","5"],right:[2,"*","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]}],n=(()=>{const e=document.querySelector(".equation-wrapper"),r=document.querySelector("#tiles"),n=document.querySelector(".buttons-wrapper"),a=document.querySelector("#score"),i=document.querySelector("#time"),s=document.querySelector(".avatar-wrapper");return{renderTiles:(e,t,n)=>{const a=(e,t,n,a,i)=>{const s=document.createElement("div");s.classList.add("tile"),s.textContent=e,s.dataset.index=t,s.style.backgroundImage=`url('../../dist/img/tiles/Tile${n}.svg')`,r.appendChild(s),s.addEventListener(a,(e=>{i(e)}))};for(let r=0;r<e.length;r++)a(e[r],r,Math.floor(5*Math.random()+1),t,n)},renderEquation:(r,n)=>{const a=(r,n)=>{const a=t("div",{class:"equation-value"},String(r));"string"==typeof r&&(r.search(/[\+\-*\/]/)||a.classList.add("operator"),"="==r&&a.classList.add("equals"),1==n&&a.classList.add("in-focus")),e.appendChild(a)};for(let e=0;e<r.length;e++)a(r[e],e==n)},updateEquation:(t,r)=>{const n=e.childNodes;t.forEach(((e,t)=>{n[t].textContent!=e&&(n[t].textContent=e),t==r?n[t].classList.add("in-focus"):n[t].classList.remove("in-focus")}))},renderAvatar:e=>{null!=s.querySelector(".avatar")&&s.removeChild(s.querySelector(".avatar")),0===e&&(e=1);const r=t("img",{class:"avatar",src:"../dist/img/avatar/avatar1.png"});e<3&&(r.src="../dist/img/avatars/avatar1.png"),e<6&&e>=3&&(r.src="../dist/img/avatars/avatar2.png"),e<9&&e>=6&&(r.src="../dist/img/avatars/avatar3.png"),e>=9&&(r.src="../dist/img/avatars/avatar4.png"),s.appendChild(r)},addPizza:e=>{const r=Math.floor(6*Math.random())+1,n=t("img",{class:"pizza",src:`../dist/img/pizza/pizza${r}.png`});n.style.bottom=1===e?"136px":136+14*(e-1)+"px",s.appendChild(n)},dropPizza:e=>{s.querySelectorAll(".pizza").forEach(((e,t)=>{const r=Math.floor(13*Math.random());setInterval((()=>{e.style.transform=`rotate(${r}deg) translateY(${136+14*t}px)`}),900-60*t)}))},renderSubmitBtn:e=>{n.querySelector("#submit")&&n.removeChild(n.querySelector("#submit"));const r=t("div",{id:"submit",class:"btn submit"},"Submit");r.addEventListener("click",e),n.appendChild(r)},renderUndoBtn:e=>{n.querySelector("#undo")&&n.removeChild(n.querySelector("#undo"));const r=t("div",{id:"undo",class:"btn undo"},"Undo");r.addEventListener("click",e),n.appendChild(r)},resetGameUI:()=>{e.innerHTML="",r.innerHTML=""},setScore:e=>{a.innerHTML=e},setTime:e=>{const t=Math.floor(e/6e4),r=e%6e4/1e3;i.textContent=`Time: ${t}:${String(r).padStart(2,"0")}`}}})();!function t(a,i,s){const o=((t,r)=>{const{left:n,right:a,tiles:i}=t,s=[...n,"=",...a],o=s.reduce(((e,t,r)=>("?"===t&&e.push(r),e)),[]);let l=0;return setInterval((()=>{r-=1e3}),1e3),{tiles:i,equation:s,getCurrentMissingValue:()=>o[l],getTime:()=>r,updateEquation:e=>{if(l>=o.length)return;const t=(e=>{const t=e.target.dataset.index;return i[t]})(e);s[o[l]]=t,l++},undo:()=>{l<=0||(s[o[l-1]]="?",l--)},checkEquation:()=>{const t=s.slice(0,3),r=s.slice(4,7);return e(...t)===e(...r)}}})(a[i],s);n.resetGameUI();let l=setInterval((()=>{const e=o.getTime();n.setTime(e)}),1e3);n.setScore(100*i),n.renderAvatar(i),n.renderEquation(o.equation,o.getCurrentMissingValue()),n.renderTiles(o.tiles,"click",(e=>{o.updateEquation(e),n.updateEquation(o.equation,o.getCurrentMissingValue())})),n.renderSubmitBtn((e=>{o.checkEquation(e)&&i<=r.length?(i++,n.addPizza(i),clearInterval(l),t(a,i,o.getTime()+4e3)):(console.log("Womp womp :("),n.dropPizza())})),n.renderUndoBtn((()=>{o.undo(),n.updateEquation(o.equation,o.getCurrentMissingValue())}))}(r,0,6e4)})();