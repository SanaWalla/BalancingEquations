(()=>{"use strict";const e=(e,t,n)=>{switch(e=Number(e),n=Number(n),t){case"+":return function(e,t){return e+t}(e,n);case"-":return function(e,t){return e-t}(e,n);case"*":return function(e,t){return e*t}(e,n);case"/":return 0==n?null:function(e,t){return e/t}(e,n);default:return}},t=(e,t,...n)=>{const r=document.createElement(e);for(let e in t)r.setAttribute(e,t[e]);return n.forEach((e=>{"string"==typeof e?r.appendChild(document.createTextNode(e)):r.appendChild(e)})),r},n=[{left:[1,"+","?"],right:[1,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:[5,"-","?"],right:[3,"+","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{left:["?","-","5"],right:[2,"*","?"],tiles:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]}],r=(()=>{const e=document.querySelector(".equation-wrapper"),n=document.querySelector("#tiles"),r=document.querySelector(".buttons-wrapper"),i=document.querySelector("#score"),s=document.querySelector("#time");return{renderTiles:(e,t,r)=>{const i=(e,t,r,i)=>{const s=document.createElement("div");s.classList.add("tile"),s.textContent=e,s.dataset.index=t,n.appendChild(s),s.addEventListener(r,(e=>{i(e)}))};for(let n=0;n<e.length;n++)i(e[n],n,t,r)},renderEquation:(n,r)=>{const i=(n,r)=>{const i=t("div",{class:"equation-value"},String(n));"string"==typeof n&&(n.search(/[\+\-*\/]/)||i.classList.add("operator"),"="==n&&i.classList.add("equals"),1==r&&i.classList.add("in-focus")),e.appendChild(i)};for(let e=0;e<n.length;e++)i(n[e],e==r)},updateEquation:(t,n)=>{const r=e.childNodes;t.forEach(((e,t)=>{r[t].textContent!=e&&(r[t].textContent=e),t==n?r[t].classList.add("in-focus"):r[t].classList.remove("in-focus")}))},renderSubmitBtn:e=>{r.querySelector("#submit")&&r.removeChild(r.querySelector("#submit"));const n=t("div",{id:"submit",class:"btn submit"},"Submit");n.addEventListener("click",e),r.appendChild(n)},renderUndoBtn:e=>{r.querySelector("#undo")&&r.removeChild(r.querySelector("#undo"));const n=t("div",{id:"undo",class:"btn undo"},"Undo");n.addEventListener("click",e),r.appendChild(n)},resetGameUI:()=>{e.innerHTML="",n.innerHTML=""},setScore:e=>{i.innerHTML=e},setTime:e=>{const t=Math.floor(e/6e4),n=e%6e4/1e3;s.textContent=`Time: ${t}:${String(n).padStart(2,"0")}`}}})();!function t(i,s,o){const u=((t,n)=>{const{left:r,right:i,tiles:s}=t,o=[...r,"=",...i],u=o.reduce(((e,t,n)=>("?"===t&&e.push(n),e)),[]);let c=0;return setInterval((()=>{n-=1e3}),1e3),{tiles:s,equation:o,getCurrentMissingValue:()=>u[c],getTime:()=>n,updateEquation:e=>{if(c>=u.length)return;const t=(e=>{const t=e.target.dataset.index;return s[t]})(e);o[u[c]]=t,c++},undo:()=>{c<=0||(o[u[c-1]]="?",c--)},checkEquation:()=>{const t=o.slice(0,3),n=o.slice(4,7);return e(...t)===e(...n)}}})(i[s],o);r.resetGameUI();let c=setInterval((()=>{r.setTime(u.getTime())}),1e3);r.setScore(100*s),r.renderEquation(u.equation,u.getCurrentMissingValue()),r.renderTiles(u.tiles,"click",(e=>{u.updateEquation(e),r.updateEquation(u.equation,u.getCurrentMissingValue())})),r.renderSubmitBtn((e=>{u.checkEquation(e)&&s<=n.length?(s++,clearInterval(c),t(i,s,u.getTime()+4e3)):console.log("Womp womp :(")})),r.renderUndoBtn((()=>{u.undo(),r.updateEquation(u.equation,u.getCurrentMissingValue())}))}(n,0,6e4)})();